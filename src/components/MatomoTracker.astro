---
// Hardcoded fallbacks (override with .env in production)
const matomoUrl = import.meta.env.PUBLIC_MATOMO_URL || 'https://mymatomo.darkube.app';
const siteId = import.meta.env.PUBLIC_MATOMO_SITE_ID || '1';
---

<!-- Add a data attribute to avoid conflicts -->
<script is:inline data-matomo-tracker>
  window._paq = window._paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u = `${matomoUrl}/`;
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '${siteId}']);
    var d = document, g = d.createElement('script');
    g.async = true;
    g.src = u + 'matomo.js';
    g.dataset.matomo = 'true'; // Tag the script
    document.head.appendChild(g);
  })();
</script>
